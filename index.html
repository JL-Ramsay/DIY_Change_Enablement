<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Change Leadership Style â€“ Self-Assessment</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 1rem;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      background-color: #0d3050;
      color: white;
      line-height: 1.5;
    }
    .form-container {
      width: 90%;
      max-width: 50rem;
      background: #0194d3;
      padding: 1.25rem;
      border-radius: 0.5rem;
      box-shadow: 0 0.25rem 0.375rem rgba(0, 0, 0, 0.2);
      margin: 2rem 0;
    }
    .hidden { display: none; }
    label, input, button { display: block; width: 100%; }
    input { margin-bottom: 1rem; }
    input, button { border: none; }
    button {
      background: #0056b3;
      color: white;
      cursor: pointer;
      transition: background 0.2s ease;
      font-size: 1.05rem;
      padding: 0.75rem 1.2rem;
      border-radius: 0.65rem;
    }
    button:hover { background: #003d80; }
    .quiz-option {
      display: flex; align-items: center; margin-left: 20px;
    }
    .quiz-option input {
      width: auto; margin-right: 0.5rem; margin-bottom: 0; vertical-align: middle;
    }
    .quiz-option label { vertical-align: middle; display: inline-block; }
    .header {
      display: flex; align-items: center; justify-content: center; margin-bottom: 10px;
    }
    .header img { max-height: 4rem; margin-right: 1rem; }
    .question-block { margin-bottom: 1rem; }
    .question-title { font-weight: bold; margin-bottom: 0.25rem; }
    .options-row {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 0.25rem;
      padding-left: 0.5rem;
    }
    .card {
      background: rgba(255,255,255,0.2);
      border-radius: 0.5rem;
      padding: 0.75rem;
      margin-bottom: 0.75rem;
    }
    .styles-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
      margin: 0.5rem 0;
    }
    .style-chip {
      background: rgba(0,0,0,0.2);
      border-radius: 0.5rem;
      padding: 0.5rem;
    }
    .nav-row { display: flex; gap: 0.5rem; margin-top: 0.75rem; }
    .nav-row button { width: auto; }
    .topbar {
      display: flex; flex-direction: column; gap: 0.4rem;
      margin-bottom: 0.75rem;
    }
    .progress-label { display: flex; justify-content: space-between; align-items: center; }
    .progressbar {
      width: 100%;
      height: 10px;
      background: rgba(255,255,255,0.25);
      border-radius: 999px;
      overflow: hidden;
    }
    .progressfill {
      height: 100%;
      width: 0%;
      background: #0056b3;
      transition: width 0.25s ease;
    }
    .legend {
      font-size: 0.9rem; opacity: 0.9; margin: 0 0 0.5rem 0;
    }
    .scores {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
      margin: 0.5rem 0 1rem;
    }
    .score-pill {
      background: rgba(0,0,0,0.2);
      border-radius: 999px;
      padding: 0.5rem 0.9rem;
      text-align: center;
      font-weight: bold;
    }
    .split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
    }
    @media (max-width: 600px) {
      .split { grid-template-columns: 1fr; }
    }
    .split .col {
      background: rgba(0,0,0,0.2);
      border-radius: 0.5rem;
      padding: 0.6rem;
    }
    .apply-block {
      background: rgba(0,0,0,0.2);
      border-radius: 0.5rem;
      padding: 0.6rem;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>

<div class="form-container">
  <div class="header">
    <img src="images/logo.png" alt="Ramsay Health Care Logo">
    <h1 id="form-title">Change Leadership Style â€“ Self-Assessment</h1>
  </div>

  <div class="topbar">
    <div class="progress-label">
      <div id="step-label">Step 1 of 5</div>
    </div>
    <div class="progressbar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progress">
      <div id="progress-fill" class="progressfill"></div>
    </div>
  </div>

  <!-- PAGE: INTRO -->
  <section id="page-intro">
    <div class="card">
      <h2 style="margin-top:0">About this quiz</h2>
      <p>This short self-assessment will help you identify the leadership style you most often use. For each statement, consider how frequently and consistently it reflects the way you show up at work. There are no right or wrong answers.</p>
      
    </div>
    <div class="nav-row">
      <button type="button" id="start-btn">Start</button>
    </div>
  </section>

  <!-- FORM -->
  <form id="quiz-form">
    <!-- SECTION 1 (Q1â€“5) -->
    <section id="page-sec1" class="hidden">
      <div class="legend">1 = rarely true Â· 5 = very true</div>

      <div class="question-block">
        <div class="question-title">1. I often paint a picture of the future to inspire others.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q1" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q1" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q1" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q1" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q1" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">2. I see possibilities and opportunities, even in uncertainty.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q2" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q2" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q2" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q2" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q2" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">3. I encourage my team to think big and embrace change.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q3" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q3" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q3" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q3" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q3" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">4. I communicate the â€˜whyâ€™ behind change clearly.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q4" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q4" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q4" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q4" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q4" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">5. I focus on long-term goals, even when short-term is tough.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q5" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q5" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q5" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q5" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q5" value="5">5</label>
        </div>
      </div>

      <div class="nav-row">
        <button type="button" id="sec1-back">Back</button>
        <button type="button" id="sec1-next">Next</button>
      </div>
    </section>

    <!-- SECTION 2 (Q6â€“10) -->
    <section id="page-sec2" class="hidden">
      <div class="legend">1 = rarely true Â· 5 = very true</div>

      <div class="question-block">
        <div class="question-title">6. I make detailed plans to ensure change is implemented smoothly.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q6" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q6" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q6" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q6" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q6" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">7. I clarify roles and responsibilities during change.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q7" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q7" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q7" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q7" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q7" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">8. I like to use systems and processes to manage uncertainty.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q8" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q8" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q8" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q8" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q8" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">9. I ensure details are well thought through before action.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q9" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q9" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q9" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q9" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q9" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">10. I feel more comfortable when there is structure and order.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q10" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q10" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q10" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q10" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q10" value="5">5</label>
        </div>
      </div>

      <div class="nav-row">
        <button type="button" id="sec2-back">Back</button>
        <button type="button" id="sec2-next">Next</button>
      </div>
    </section>

    <!-- SECTION 3 (Q11â€“15) -->
    <section id="page-sec3" class="hidden">
      <div class="legend">1 = rarely true Â· 5 = very true</div>

      <div class="question-block">
        <div class="question-title">11. I energise people around me to get on board with change.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q11" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q11" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q11" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q11" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q11" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">12. I acknowledge and celebrate progress, even small wins.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q12" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q12" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q12" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q12" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q12" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">13. I focus on building enthusiasm and momentum in the team.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q13" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q13" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q13" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q13" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q13" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">14. I support people emotionally when change feels tough.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q14" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q14" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q14" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q14" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q14" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">15. I encourage collaboration and collective ownership of change.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q15" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q15" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q15" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q15" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q15" value="5">5</label>
        </div>
      </div>

      <div class="nav-row">
        <button type="button" id="sec3-back">Back</button>
        <button type="button" id="sec3-next">Next</button>
      </div>
    </section>

    <!-- SECTION 4 (Q16â€“20) -->
    <section id="page-sec4" class="hidden">
      <div class="legend">1 = rarely true Â· 5 = very true</div>

      <div class="question-block">
        <div class="question-title">16. I help my team stay grounded during change.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q16" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q16" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q16" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q16" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q16" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">17. I preserve what works well while introducing change.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q17" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q17" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q17" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q17" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q17" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">18. I reassure staff by providing consistency and continuity.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q18" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q18" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q18" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q18" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q18" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">19. I prioritise minimising disruption where possible.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q19" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q19" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q19" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q19" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q19" value="5">5</label>
        </div>
      </div>

      <div class="question-block">
        <div class="question-title">20. I support my team by being calm and steady under pressure.</div>
        <div class="options-row">
          <label class="quiz-option"><input type="radio" name="q20" value="1">1</label>
          <label class="quiz-option"><input type="radio" name="q20" value="2">2</label>
          <label class="quiz-option"><input type="radio" name="q20" value="3">3</label>
          <label class="quiz-option"><input type="radio" name="q20" value="4">4</label>
          <label class="quiz-option"><input type="radio" name="q20" value="5">5</label>
        </div>
      </div>

      <div class="nav-row">
        <button type="button" id="sec4-back">Back</button>
        <button type="button" id="see-results">See results</button>
      </div>
    </section>
  </form>

  <!-- PAGE: RESULTS -->
  <section id="page-results" class="hidden">
    <h1>Results</h1>
    <p>Below results shows the highest style match.</p>
    <div class="scores" id="score-pills"></div>

    <div id="style-cards"></div>

    <div class="card" id="apply-section" class="hidden"></div>

    <div class="nav-row">
      <button type="button" id="retake-btn">Retake</button>
    </div>
  </section>
</div>

<script>
  // Pages
  const PAGES = ['intro','sec1','sec2','sec3','sec4','results'];
  let current = 0;

  // Score threshold: show styles strictly greater than 15/25
  const SHOW_THRESHOLD = 14;

  // Styles and ranges (plus style-specific guidance)
  const STYLES = [
    {
      key:'visionary', name:'Visionary', icon:'ðŸ”­', range:[1,2,3,4,5],
      strengths:'Inspires with a clear future vision; sees opportunities; energises people to aim higher.',
      blind:'May overlook practicalities; risks losing people who prefer detail and clarity.',
      apply: {
        resistance: 'Co-create the vision: run a short workshop to translate the â€œwhyâ€ into 2â€“3 practical benefits staff helped define.',
        peer: 'Acknowledge the shift and share a clear 90-day vision; invite peers to own parts of it to build credibility.',
        delegation: 'Delegate â€œhowâ€ decisions with guardrails linked to outcomes; review progress at agreed checkpoints.',
        morale: 'Connect daily tasks back to the bigger purpose; celebrate stories that show progress toward the vision.'
      }
    },
    {
      key:'organiser', name:'Organiser', icon:'ðŸ“‹', range:[6,7,8,9,10],
      strengths:'Brings structure, clarity and process; ensures change is practical and sustainable.',
      blind:'May get bogged down in detail; can be seen as rigid or resistant to ambiguity.',
      apply: {
        resistance: 'Map the workflow with staff and remove 1â€“2 pain points they choose; publish a simple checklist they helped write.',
        peer: 'Set clear roles/ways-of-working with ex-peers; invite feedback on the plan and adjust visibly.',
        delegation: 'Delegate tasks with a short RACI and definition of done; move from â€œtellâ€ to â€œaskâ€ in stand-ups.',
        morale: 'Time-box planning and deliver quick wins; show a visible roadmap so people know whatâ€™s coming.'
      }
    },
    {
      key:'motivator', name:'Motivator', icon:'ðŸ”¥', range:[11,12,13,14,15],
      strengths:'Builds enthusiasm; encourages collaboration; celebrates progress; supports morale.',
      blind:'May prioritise energy over substance; risk burnout if the pace is too fast.',
      apply: {
        resistance: 'Listen for concerns and reflect them back; pair skeptics with early adopters for peer-led demos.',
        peer: 'Share credit generously; ask former peers to lead showcase moments tied to concrete outcomes.',
        delegation: 'Delegate ownership with clear success metrics; balance urgency with realistic pacing.',
        morale: 'Institutionalise â€œsmall-win Fridaysâ€ and shout-outs; rotate facilitators to spread energy sustainably.'
      }
    },
    {
      key:'stabiliser', name:'Stabiliser', icon:'âš–ï¸', range:[16,17,18,19,20],
      strengths:'Provides calm, continuity and reassurance; helps teams feel safe during change.',
      blind:'May cling too tightly to the past; risk slowing progress or avoiding bold steps.',
      apply: {
        resistance: 'Frame the change as continuity-plus: what stays the same, what improves, and the support available.',
        peer: 'Set steady norms and offer 1:1s; use data and patient impact to justify decisions calmly.',
        delegation: 'Delegate routine work to create capacity; keep safety nets (checkpoints, buddying) without micromanaging.',
        morale: 'Protect recovery time and smooth the pace; normalise talking about load and re-prioritise openly.'
      }
    }
  ];

  // -------- Navigation / Progress --------
  function showPage(index) {
    PAGES.forEach(p => document.getElementById(`page-${p}`)?.classList.add('hidden'));
    document.getElementById(`page-${PAGES[index]}`)?.classList.remove('hidden');
    current = index;

    const stepLabel = document.getElementById('step-label');
    const fill = document.getElementById('progress-fill');
    const bar = document.querySelector('.progressbar');

    if (PAGES[index] === 'results') {
      stepLabel.textContent = 'Results';
      fill.style.width = '100%';
      bar.setAttribute('aria-valuenow', '100');
    } else {
      // Intro + 4 sections = 5 steps (indices 0..4)
      const clamped = Math.min(index, 4);
      const pct = Math.round((clamped / 4) * 100); // 0,25,50,75,100
      stepLabel.textContent = `Step ${index + 1} of 5`;
      fill.style.width = pct + '%';
      bar.setAttribute('aria-valuenow', String(pct));
    }
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // -------- Quiz helpers --------
  function getAnswerValue(q) {
    const el = document.querySelector(`input[name="q${q}"]:checked`);
    return el ? parseInt(el.value, 10) : 0;
    }
  function ensureRangeAnswered(start, end) {
    for (let i = start; i <= end; i++) {
      if (!document.querySelector(`input[name="q${i}"]:checked`)) {
        alert(`Please answer question ${i} before continuing.`);
        return false;
      }
    }
    return true;
  }
  function sumForRange(range) {
    return range.reduce((acc, qn) => acc + getAnswerValue(qn), 0);
  }
  function calculateScores() {
    return STYLES.map(s => ({
      key: s.key, name: s.name, icon: s.icon,
      strengths: s.strengths, blind: s.blind, apply: s.apply,
      score: sumForRange(s.range)
    }));
  }

  // -------- Results rendering --------
  function renderScorePills(matched) {
    const pills = document.getElementById('score-pills');
    if (matched.length === 0) {
      pills.innerHTML = `<div class="score-pill">No style exceeded 15/25. Consider retaking or aiming for balance across styles.</div>`;
      return;
    }
    pills.innerHTML = matched
      .map(s => `<div class="score-pill">${s.name} ${s.icon}: ${s.score}/25</div>`)
      .join('');
  }

  function renderStyleCards(matched) {
    const cards = document.getElementById('style-cards');
    if (matched.length === 0) {
      cards.innerHTML = '';
      return;
    }
    cards.innerHTML = matched.map(s => `
      <div class="card">
        <h3 style="margin:0 0 .5rem 0">${s.name} ${s.icon}</h3>
        <div class="split">
          <div class="col">
            <strong>Strengths</strong>
            <p style="margin:.25rem 0 0 0">${s.strengths}</p>
          </div>
          <div class="col">
            <strong>Blind Spots</strong>
            <p style="margin:.25rem 0 0 0">${s.blind}</p>
          </div>
        </div>
      </div>
    `).join('');
  }

  function renderApplySection(matched) {
    const el = document.getElementById('apply-section');
    if (matched.length === 0) {
      el.innerHTML = `
        <h3 style="margin-top:0">Apply your style</h3>
        <p>None of the styles passed the 15/25 threshold this time. Look at your answers and pick one area to strengthen this month (vision, structure, momentum, or stability). Re-take the quiz after youâ€™ve tried 2â€“3 actions.</p>
      `;
      return;
    }

    el.innerHTML = `
      <h3 style="margin-top:0">Apply your style</h3>
      ${matched.map(s => `
        <div class="apply-block">
          <h4 style="margin:.1rem 0 .35rem 0">${s.name} ${s.icon}</h4>
          <ul style="margin:.25rem 0 .25rem 1rem">
            <li><strong>Change Resistance:</strong> ${s.apply.resistance}</li>
            <li><strong>Peer-to-Leader:</strong> ${s.apply.peer}</li>
            <li><strong>Delegation & Trust:</strong> ${s.apply.delegation}</li>
            <li><strong>Culture & Morale:</strong> ${s.apply.morale}</li>
          </ul>
        </div>
      `).join('')}
    `;
  }

  function showResults() {
    const scores = calculateScores();
    // Only keep styles strictly greater than 15
    const matched = scores.filter(s => s.score > SHOW_THRESHOLD)
                          .sort((a,b) => b.score - a.score);

    renderScorePills(matched);
    renderStyleCards(matched);
    renderApplySection(matched);

    showPage(5); // results
  }

  function resetAll() {
    document.getElementById('quiz-form').reset();
    showPage(0); // intro
  }

  // Navigation
  document.getElementById('start-btn').addEventListener('click', () => showPage(1));

  document.getElementById('sec1-back').addEventListener('click', () => showPage(0));
  document.getElementById('sec1-next').addEventListener('click', () => {
    if (ensureRangeAnswered(1,5)) showPage(2);
  });

  document.getElementById('sec2-back').addEventListener('click', () => showPage(1));
  document.getElementById('sec2-next').addEventListener('click', () => {
    if (ensureRangeAnswered(6,10)) showPage(3);
  });

  document.getElementById('sec3-back').addEventListener('click', () => showPage(2));
  document.getElementById('sec3-next').addEventListener('click', () => {
    if (ensureRangeAnswered(11,15)) showPage(4);
  });

  document.getElementById('sec4-back').addEventListener('click', () => showPage(3));
  document.getElementById('see-results').addEventListener('click', () => {
    if (ensureRangeAnswered(16,20)) showResults();
  });

  document.getElementById('retake-btn').addEventListener('click', resetAll);

  // Init
  showPage(0);
</script>

</body>
</html>
